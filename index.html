<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>PlanUp</title>
  <meta name="theme-color" content="#eaf7f1">

  <link href="https://fonts.googleapis.com/icon?family=Material+Icons+Outlined" rel="stylesheet">

  <style>
    *{box-sizing:border-box;font-family:system-ui,-apple-system,Segoe UI,Roboto}
    body{margin:0;background:#f4f4f4;padding-bottom:90px}

    /* HEADER */
    header{
      padding:14px 16px;
      display:flex;
      align-items:center;
      justify-content:space-between;
      background:#fff;
      border-bottom:1px solid #ddd
    }
    header h2{margin:0;font-size:20px}

    /* SEARCH */
    .search{
      margin:14px 16px;
      background:#fff;
      border-radius:26px;
      display:flex;
      align-items:center;
      padding:12px 16px;
      box-shadow:0 4px 12px rgba(0,0,0,.08)
    }
    .search input{
      border:none;
      outline:none;
      flex:1;
      margin-left:10px;
      font-size:15px
    }

    main{padding:16px}

    /* BUDGET CARD */
    .budget-card{
      background:#eaf7f1;
      border-radius:22px;
      padding:16px;
      margin-bottom:24px;
      box-shadow:0 4px 12px rgba(0,0,0,.08),0 12px 32px rgba(0,0,0,.06);
      transition:background-color .5s ease;
    }

    .budget-top{
      display:flex;
      justify-content:space-between;
      gap:16px;
    }

    .budget-left{
  display:flex;
  align-items:center;   /* THIS is the key */
  gap:10px;
  flex:1;
}
    .right{text-align:right;min-width:90px}

.trend{
  font-size:28px;
  color:#2fb67c;
  display:flex;
  align-items:center;
  justify-content:center;
  }

    .label{font-size:13px;color:#666}
    .amount{font-size:22px;font-weight:700;color:#2fb67c}
    .amount.small{font-size:14px}

    .budget-bar{
      height:8px;
      background:rgba(0,0,0,.08);
      border-radius:8px;
      margin-top:14px;
      overflow:hidden;
    }

    .budget-fill{
      height:100%;
      width:0%;
      transition:width .6s cubic-bezier(.22,1,.36,1)
    }

    .budget-card.green{background:#eaf7f1}
    .budget-card.yellow{background:#fff6db}
    .budget-card.red{background:#fdecea}

    .budget-fill.green{background:#2fb67c}
    .budget-fill.yellow{background:#f1c40f}
    .budget-fill.red{background:#e74c3c}

    /* FILTER BAR */
    .filter-bar{
      display:flex;
      gap:10px;
      overflow-x:auto;
      margin-bottom:14px;
    }

    .filter-btn{
      padding:8px 16px;
      border-radius:18px;
      font-size:13px;
      background:#eaeaea;
      border:none;
      cursor:pointer;
    }

    .filter-btn.active{
      background:#111;
      color:#fff;
    }

    /* CATEGORY */
    .category-card{
      background:#fff;
      border-radius:20px;
      padding:14px;
      margin-bottom:18px;
      box-shadow:0 4px 12px rgba(0,0,0,.06);
    }

    .category-title{font-size:15px;font-weight:600;margin-bottom:10px}

    /* ITEM CARD */
    .item-card{
      display:flex;
      gap:12px;
      padding:14px 12px;
      border-radius:14px;
      background:#f7f7f7;
      margin-bottom:12px;
      cursor:pointer;
    }

    .item-image{
      width:46px;
      height:46px;
      border-radius:12px;
      background:#e0e0e0;
      display:flex;
      align-items:center;
      justify-content:center;
    }

    .item-info{flex:1}
    .item-name{font-weight:600;font-size:14px}

    .item-details{
      max-height:0;
      overflow:hidden;
      opacity:0;
      transition:max-height .35s ease, opacity .25s ease;
    }

    .item-card.expanded .item-details{
      max-height:300px;
      opacity:1;
    }

    .item-total{
      margin-top:auto;
      font-size:12px;
      text-align:right;
    }

    /* EMPTY */
    .empty{text-align:center;color:#aaa;margin-top:80px}

    /* FAB */
    .fab-wrapper{
      position:fixed;
      right:16px;
      bottom:80px;
      z-index:20
    }

    .fab{
      width:42px;
      height:42px;
      border-radius:50%;
      background:#fff;
      display:flex;
      align-items:center;
      justify-content:center;
      box-shadow:0 6px 18px rgba(0,0,0,.3);
      cursor:pointer
    }

    .scan-btn{
      position:fixed;
      right:16px;
      bottom:150px;
      width:46px;
      height:46px;
      border-radius:50%;
      background:#fff;
      display:flex;
      align-items:center;
      justify-content:center;
      box-shadow:0 6px 18px rgba(0,0,0,.25);
      cursor:pointer;
    }

    /* MODAL */
    .modal{
      position:fixed;
      inset:0;
      background:rgba(0,0,0,.35);
      display:flex;
      align-items:center;
      justify-content:center;
      z-index:50;
    }

    .modal.hidden{display:none}

    .modal-box{
      background:#fff;
      border-radius:18px;
      padding:20px;
      width:88%;
      max-width:360px;
    }

    .modal-box input{
      width:100%;
      padding:10px;
      margin:8px 0;
      border-radius:10px;
      border:1px solid #000;
    }

    nav{
      position:fixed;
      bottom:0;
      left:0;
      right:0;
      height:64px;
      background:#fff;
      display:flex;
      border-top:1px solid #ddd;
    }

    nav button{
      flex:1;
      border:none;
      background:none;
    }

    header{
  padding:14px 16px;
  display:flex;
  align-items:center;
  gap:12px;
  background:#fff;
  border-bottom:1px solid #ddd;
}

header.center-title{
  justify-content:space-between;
}

header.left-title{
  justify-content:flex-start;
}

header.left-title h2{
  margin-left:0;
}

header.center-title h2{
  margin:0 auto;
    }

      .profile-card{
  background:#fff;
  border-radius:20px;
  padding:16px;
  margin-bottom:16px;
  box-shadow:0 8px 24px rgba(0,0,0,.06);
}

.profile-title{
  font-size:16px;
  font-weight:600;
  margin-bottom:12px;
}

.profile-input{
  width:100%;
  padding:12px;
  margin-bottom:10px;
  border-radius:12px;
  border:1px solid #ddd;
  font-size:14px;
}

.profile-btn{
  width:100%;
  padding:12px;
  border:none;
  border-radius:14px;
  background:#2f80ed;
  color:#fff;
  font-size:15px;
}

.profile-row{
  display:flex;
  align-items:center;
  gap:12px;
}

.profile-row span{
  font-size:22px;
  color:#2f80ed;
}

.profile-label{
  font-size:12px;
  color:#777;
}

.profile-value{
  font-size:14px;
  font-weight:600;
      }
    
  </style>
</head>

<body>

<header id="appHeader">
  <span class="material-icons-outlined" id="menuIcon">menu</span>
  <h2 id="pageTitle">My List</h2>
  <span class="material-icons-outlined" id="notifyIcon">notifications</span>
</header>
  
<div class="search" id="searchBar">
  <span class="material-icons-outlined">search</span>
  <input placeholder="Search items...">
</div>

<main>
  <div class="budget-card">
    <div class="budget-top">
      <div class="budget-left">
        <span class="material-icons-outlined trend">trending_down</span>
        <div>
          <div class="label">Total Estimated</div>
          <div class="amount" id="totalSpent">$0.00</div>
          <div class="label">Avg / item</div>
          <div class="amount small" id="avgItem">$0.00</div>
        </div>
      </div>
      <div class="right">
        <div class="label">Remaining</div>
        <div class="amount" id="rightAmount">$20.00</div>
        <div class="label">Items</div>
        <div class="amount small" id="itemCount">0</div>
      </div>
    </div>
    <div class="budget-bar">
      <div class="budget-fill" id="budgetFill"></div>
    </div>
  </div>

  <div id="filterBar" class="filter-bar"></div>
  <div id="itemList"></div>
  <div id="emptyState" class="empty">Nothing added yet</div>
</main>

<div class="fab-wrapper">
  <div class="fab" onclick="openAddItem()">
    <span class="material-icons-outlined">add</span>
  </div>
</div>

<div class="scan-btn">
  <span class="material-icons-outlined">photo_camera</span>
</div>

<div id="addModal" class="modal hidden">
  <div class="modal-box">
    <h3>Add Item</h3>
    <input id="itemName" placeholder="Item name">
    <input id="itemQty" type="number" placeholder="Quantity">
    <input id="itemPrice" type="number" placeholder="Price">
    <input id="itemCategory" placeholder="Category">
    <button onclick="saveItem()">Add Item</button>
  </div>
</div>

      <main id="insightsPage" style="display:none;">
  <div class="category-card">
    <div class="category-title">Overview</div>

    <div class="item-card">
      <div class="item-info">
        <div class="item-name">Total Spent</div>
        <div class="item-meta" id="insightTotal">$0.00</div>
      </div>
    </div>

    <div class="item-card">
      <div class="item-info">
        <div class="item-name">Budget Used</div>
        <div class="item-meta" id="insightPercent">0%</div>
      </div>
    </div>

    <div class="item-card">
      <div class="item-info">
        <div class="item-name">Total Items</div>
        <div class="item-meta" id="insightItems">0</div>
      </div>
    </div>

    <div class="item-card">
      <div class="item-info">
        <div class="item-name">Top Category</div>
        <div class="item-meta" id="insightTopCategory">—</div>
      </div>
    </div>
  </div>
      </main>

  <main id="profilePage" style="display:none;">
  <div class="category-card">
    <div class="category-title">Profile</div>

    <div class="item-card">
      <div class="item-info">
        <div class="item-name">Budget</div>
        <div class="item-meta">$20.00</div>
      </div>
    </div>

    <div class="item-card">
      <div class="item-info">
        <div class="item-name">Total Items Added</div>
        <div class="item-meta" id="profileItemCount">0</div>
      </div>
    </div>

    <div class="item-card">
      <div class="item-info">
        <div class="item-name">Categories Used</div>
        <div class="item-meta" id="profileCategories">0</div>
      </div>
    </div>

    <div class="item-card">
      <div class="item-info">
        <div class="item-name">Version</div>
        <div class="item-meta">PlanUp v1.0</div>
      </div>
    </div>
  </div>
  </main>

  <main id="profilePage" style="display:none; padding:16px;">
  
  <!-- LOGIN CARD -->
  <div class="profile-card" id="loginCard">
    <div class="profile-title">Login</div>

    <input class="profile-input" placeholder="Username">
    <input class="profile-input" type="password" placeholder="Password">

    <button class="profile-btn">Login</button>
  </div>

  <!-- PROFILE CONTENT -->
  <div id="profileContent" style="display:none;">
    
    <div class="profile-card">
      <div class="profile-row">
        <span class="material-icons-outlined">person</span>
        <div>
          <div class="profile-label">Username</div>
          <div class="profile-value">Amirbaqian</div>
        </div>
      </div>
    </div>

    <div class="profile-card">
      <div class="profile-row">
        <span class="material-icons-outlined">shopping_cart</span>
        <div>
          <div class="profile-label">Total Items</div>
          <div class="profile-value" id="profileItemCount">0</div>
        </div>
      </div>
    </div>

    <div class="profile-card">
      <div class="profile-row">
        <span class="material-icons-outlined">category</span>
        <div>
          <div class="profile-label">Categories Used</div>
          <div class="profile-value" id="profileCategories">0</div>
        </div>
      </div>
    </div>

  </div>

  </main>

<nav>
  <button onclick="showHome()">Home</button>
  <button onclick="showInsights()">Insights</button>
  <button onclick="showProfile()">Profile</button>
</nav>

<script>
  let items = [];
  let activeFilter = "All";
  let budget = 20;

  function openAddItem(){
    addModal.classList.remove("hidden");
  }

  addModal.addEventListener("click", e=>{
    if(e.target === addModal) addModal.classList.add("hidden");
  });

  function saveItem(){
    const name = itemName.value.trim();
    const qty = Number(itemQty.value);
    const price = Number(itemPrice.value);
    const category = itemCategory.value || "Other";

    if(!name) return;

    const existing = items.find(i=>i.name===name && i.category===category);
    if(existing){
      existing.entries.push({qty,price});
    }else{
      items.push({name,category,entries:[{qty,price}]});
    }

    itemName.value=itemQty.value=itemPrice.value=itemCategory.value="";
    addModal.classList.add("hidden");
    render();
  }

  function render(){
    renderBudget();
    renderItems();
  }

  function renderBudget(){
    let total=0,count=0;
    items.forEach(i=>i.entries.forEach(e=>{
      total+=e.qty*e.price;
      count+=e.qty;
    }));

    totalSpent.textContent=`$${total.toFixed(2)}`;
    avgItem.textContent=count?`$${(total/count).toFixed(2)}`:"$0.00";
    itemCount.textContent=count;

    const remaining=budget-total;
    rightAmount.textContent=`$${Math.abs(remaining).toFixed(2)}`;
    document.querySelector(".right .label").textContent=remaining>=0?"Remaining":"Over budget";

    const percent=(total/budget)*100;
    budgetFill.style.width=Math.min(percent,120)+"%";

    const card=document.querySelector(".budget-card");
    card.className="budget-card";
    budgetFill.className="budget-fill";

    if(percent<70){card.classList.add("green");budgetFill.classList.add("green")}
    else if(percent<=100){card.classList.add("yellow");budgetFill.classList.add("yellow")}
    else{card.classList.add("red");budgetFill.classList.add("red")}
  }

  function renderItems(){
    itemList.innerHTML="";
    emptyState.style.display=items.length?"none":"block";

    items.forEach(item=>{
      let qty=0,price=0;
      const card=document.createElement("div");
      card.className="item-card";

      const details=document.createElement("div");
      details.className="item-details";

      item.entries.forEach(e=>{
        qty+=e.qty;
        price+=e.qty*e.price;
        const d=document.createElement("div");
        d.textContent=`Qty: ${e.qty} • $${e.price}`;
        details.appendChild(d);
      });

      card.innerHTML=`
        <div class="item-image"><span class="material-icons-outlined">local_cafe</span></div>
        <div class="item-info">
          <div class="item-name">${item.name}</div>
        </div>
        <div class="item-total">${qty} items<br>$${price.toFixed(2)}</div>
      `;

      card.querySelector(".item-info").appendChild(details);
      card.onclick=()=>card.classList.toggle("expanded");
      itemList.appendChild(card);
    });
  }

  function showHome(){
  document.querySelector("main").style.display = "block";
  insightsPage.style.display = "none";
}

function showInsights(){
  document.querySelector("main").style.display = "none";
  insightsPage.style.display = "block";
  renderInsights();
}

function renderInsights(){
  let total = 0;
  let count = 0;
  const categoryTotals = {};

  items.forEach(item=>{
    let catTotal = 0;
    item.entries.forEach(e=>{
      total += e.qty * e.price;
      count += e.qty;
      catTotal += e.qty * e.price;
    });
    categoryTotals[item.category] =
      (categoryTotals[item.category] || 0) + catTotal;
  });

  insightTotal.textContent = `$${total.toFixed(2)}`;
  insightItems.textContent = count;
  insightPercent.textContent =
    budget ? Math.min((total/budget)*100,100).toFixed(1)+"%" : "0%";

  let topCat = "—";
  let max = 0;
  for(const c in categoryTotals){
    if(categoryTotals[c] > max){
      max = categoryTotals[c];
      topCat = c;
    }
  }
  insightTopCategory.textContent = topCat;
  }

  const homePage = document.querySelector("main");
const insightsPage = document.getElementById("insightsPage");
const profilePage = document.getElementById("profilePage");

function showHome(){
  pageTitle.textContent = "My List";
  searchBar.style.display = "flex";
  notifyIcon.style.display = "block";

  homePage.style.display = "block";
  insightsPage.style.display = "none";
  profilePage.style.display = "none";
}

function showInsights(){
  pageTitle.textContent = "Insights";
  searchBar.style.display = "none";
  notifyIcon.style.display = "none";

  homePage.style.display = "none";
  insightsPage.style.display = "block";
  profilePage.style.display = "none";

  renderInsights();
}

function showProfile(){
  pageTitle.textContent = "Profile";
  searchBar.style.display = "none";
  notifyIcon.style.display = "none";

  homePage.style.display = "none";
  insightsPage.style.display = "none";
  profilePage.style.display = "block";

  renderProfile();
  }

  function renderProfile(){
  let itemCount = 0;
  const categories = new Set();

  items.forEach(item=>{
    item.entries.forEach(e=> itemCount += e.qty);
    categories.add(item.category);
  });

  profileItemCount.textContent = itemCount;
  profileCategories.textContent = categories.size;
  }

  function setHeader(mode){
  const header = document.getElementById("appHeader");

  header.classList.remove("center-title","left-title");

  if(mode === "home"){
    header.classList.add("center-title");
    menuIcon.style.display = "block";
    notifyIcon.style.display = "block";
  }else{
    header.classList.add("left-title");
    menuIcon.style.display = "none";
    notifyIcon.style.display = "none";
  }
}

function showProfile(){
  pageTitle.textContent = "Profile";
  setHeader("other");

  document.querySelector("main").style.display = "none";
  insightsPage.style.display = "none";
  profilePage.style.display = "block";
    }

  function updateHeader(){
  pageTitle.textContent =
    currentPage === "home" ? "My List" :
    currentPage === "insights" ? "Insights" : "Profile";

  // Home → show menu + notification
  if(currentPage === "home"){
    menuIcon.style.display = "block";
    notifyIcon.style.display = "block";
  } 
  // Insights & Profile → hide them
  else {
    menuIcon.style.display = "none";
    notifyIcon.style.display = "none";
  }
  }

  render();
</script>

</body>
    </html>
